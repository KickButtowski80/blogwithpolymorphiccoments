"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),enableEditing=function(e){nodes=document.getElementById(e).querySelectorAll(".editable"),nodes.forEach(function(e){e.setAttribute("contentEditable","true"),e.onfocus=function(){window.selectedEditor=e,window.editorToolbar=new editorToolbar(e)},e.onblur=function(){saveData(e),window.editorToolbar.toolbarElement.classList.remove("active")}}),nodes[0].focus()},saveData=function(e){var t=e.getAttribute("src");console.log(t);var o=new FormData,n=new XMLHttpRequest,a=getCSRFParam(),r=e.getAttribute("property");console.log("edit params"+e.innerHTML),o.append(r,e.innerHTML),o.append(a.paramName,a.token),n.open("PUT",t),n.send(o)},getCSRFParam=function(){if(window.csrfParams)return window.csrfParams;var e=document.querySelector('meta[name="csrf-param"]').getAttribute("content"),t=document.querySelector('meta[name="csrf-token"]').getAttribute("content");return window.csrfParams={paramName:e,token:t},window.csrfParams},formatDoc=function(e,t){window.editorToolbar.formatDoc(e,t)},editorToolbar=function(){function e(t){_classCallCheck(this,e),this.elem=t,this.toolbarElement=document.getElementById("edit-toolbar"),this.attachToolbar()}return _createClass(e,[{key:"attachToolbar",value:function(){this.elem.parentNode.insertBefore(this.toolbarElement,this.elem);this.toolbarElement.classList.add("active")}},{key:"formatDoc",value:function(e,t){this.validateMode()&&(document.execCommand(e,!1,t),this.elem.focus())}},{key:"validateMode",value:function(){return!document.getElementById("switchBox").checked||(alert('Uncheck "Show HTML".'),elem.focus(),!1)}}]),e}();